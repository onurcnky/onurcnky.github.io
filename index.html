<!DOCTYPE html>
<html>
<head>
	<title>My SCORM Player</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="SCORM_API_wrapper.js"></script>
	<script>
		var scormPlayerWindow;
		var scormPlayerUrl = "scorm2004/index.html?imsmanifest=scorm2004/imsmanifest.xml";
		var scormAPI = pipwerks.SCORM;
		var scormConnected = false;

		function launchScormPlayer() {
			if (scormPlayerWindow && !scormPlayerWindow.closed) {
				scormPlayerWindow.close();
			}
			scormPlayerWindow = window.open(scormPlayerUrl);
			initSCORM();
		}

		function initSCORM() {
			if (!scormConnected) {
				var connectResult = scormAPI.doLMSInitialize();
				if (connectResult) {
					scormConnected = true;
				} else {
					alert("Failed to connect to LMS");
				}
			}
		}

		function closeScormPlayer() {
			if (scormConnected) {
				scormAPI.doLMSFinish();
				scormConnected = false;
			}
			if (scormPlayerWindow && !scormPlayerWindow.closed) {
				scormPlayerWindow.close();
			}
		}

		$(function() {
			$("#play-button").click(launchScormPlayer);
			$("#close-button").click(closeScormPlayer);
		});
	</script>
</head>
<body>
	<button id="play-button">Play SCORM</button>
	<button id="close-button">Close SCORM Player</button>
</body>
</html>
